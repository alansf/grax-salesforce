<apex:page controller="GRAXConfiguration" showChat="false" showHeader="false"> 
	<style type="text/css">
        .objectSelectWidth { width: 500px; }
    </style>
    <apex:form id="form">
        <apex:pageBlock >
            <apex:pageMessages escape="false"/>
            <apex:pageBlockSection columns="2" >
            		<apex:pageBlockSectionItem>
                <apex:selectList value="{!objToQuery}" multiselect="false" size="1" styleClass="objectSelectWidth" disabled="{! NOT(isconfigured)}" label="Object">
                    <apex:selectOptions value="{!items}"/>
                    <apex:actionSupport reRender="form" event="onchange"/>
                </apex:selectList>
                <apex:commandButton value="Save Query" action="{!SaveSelection}" disabled="{! NOT(isconfigured)}"/>
                </apex:pageBlockSectionItem>
                <apex:pageBlockSectionItem>
                		<apex:pageBlockSection columns="2">
		                 <apex:commandButton value="Start Synchronization" action="{!Synchronize}" disabled="{! enablesynch || NOT(isconfigured)}"/>
		                 <!--  <apex:commandButton value="Update Field List" action="{!QueryObject}"/> -->
		                 <apex:commandButton value="Deploy Trigger" action="{!DeployTrigger}" disabled="{! enablesynch || NOT(isconfigured)}"/>
	                 </apex:pageBlockSection>
                 </apex:pageBlockSectionItem>
            </apex:pageBlockSection>
             <apex:pageBlockSection title="Selected fields for GRAX" columns="3">
	             <apex:pageBlockSectionItem>
	             	<apex:pageBlockTable value="{!fieldProperties}" var="f">
	              	  <apex:column >
					  	<apex:facet name="header"> 
						</apex:facet>
						<apex:inputCheckbox value="{!f.fieldselected}" id="checkedone" disabled="{!f.disabled}">
					  </apex:inputCheckbox>
					  </apex:column>
	                  <apex:column value="{!f.fieldname}" headerValue="Field Name"/>
	                  <apex:column value="{!f.fieldtype}" headerValue="Field Type"/>
	                  <apex:column value="{!f.referenceto}" headerValue="Referenced To"/>
	                  <apex:column value="{!f.message}" headerValue="Message"/>
	              </apex:pageBlockTable>
	             </apex:pageBlockSectionItem>
             	 <apex:pageBlockSectionItem>
             	 	  <apex:pageBlockSection title="GRAX Query Data" columns="1" collapsible="false" showHeader="false">
             	 	  	  <b>Select</b>
	             	 	  <apex:inputTextarea id="defaultFields" value="{!defaultfields}" cols="100" rows="5"  disabled="{!NOT(isconfigured)}"/>
	             	 	  <b>Where</b>
				          <apex:inputTextarea id="defaultFilter" value="{!defaultfilter}" cols="100" rows="5"  disabled="{!NOT(isconfigured)}"/>
				          <b>Order By</b>
				          <apex:inputTextarea id="defaultProcessingOrder" value="{!defaultprocessordering}" cols="100" rows="5"  disabled="{!NOT(isconfigured)}"/>
				          <b>GRAX JSON Configuration</b>
				          <apex:inputTextarea id="graxconfig" value="{!graxconfig}" cols="100" rows="5"  disabled="true"/>
			          </apex:pageBlockSection>
             	 </apex:pageBlockSectionItem>
            </apex:pageBlockSection>
        </apex:pageBlock>
   </apex:form>
</apex:page>